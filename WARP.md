# WARP.md

This file provides guidance to WARP (warp.dev) when working with code in this repository.

## Project overview
`png_explorer` is a small Ada CLI program intended to inspect and display internal structure of PNG files.

Build tooling is Ada-centric:
- Alire (`alr`) is used as the package/build front-end.
- The project is also buildable directly via a GNAT project file (`png_explorer.gpr`) which includes an Alire-generated config project in `config/`.

## Common commands
### Build
```bash
# Development profile (default)
alr build

# Release profile
alr build --release

# Clean build artifacts (gprclean -r)
alr clean
```

### Run
```bash
# Run default executable (builds first)
alr run

# List executables Alire knows about
alr run --list

# Pass arguments to the executable
alr run --args="..."

# Skip build step if you already built
alr run --skip-build
```

### Tests
There are no explicit test actions defined in this crate yet. Today:
```bash
# With no test actions defined, this effectively builds in release mode
alr test
```

### Build directly with GPRBuild (without Alire)
Use this when you want to bypass Alire and call GNAT tooling directly:
```bash
gprbuild -P png_explorer.gpr

# Clean (recursive)
gprclean -r -P png_explorer.gpr
```

## Build system / configuration notes
- `png_explorer.gpr`:
  - Sources come from `src/` and `config/`.
  - The entrypoint is `src/png_explorer.adb`.
  - `Exec_Dir` is `bin/`.
  - `Object_Dir` is `obj/<profile>` (derived from `Png_Explorer_Config.Build_Profile`).
- `config/png_explorer_config.{ads,gpr,h}` are generated by Alire and encode the active build profile and compiler switches. Avoid hand-editing these; regenerate via Alire if needed.
- `config/png_explorer_config.gpr` pulls additional compiler flags from the `ADAFLAGS` environment variable (space-separated). Example:
  ```bash
  ADAFLAGS="-gnat2022" alr build
  ```

## Code structure (big picture)
- `src/png_explorer.adb` is currently the only application source file and is the program entrypoint.
  - It instantiates `Ada.Sequential_IO` over an 8-bit modular type to read a PNG as a byte stream.
  - The file path is currently hard-coded (see the `Byte_IO.Open` call).
- `config/` contains Alire-generated build/profile configuration used by `png_explorer.gpr` and the compiler.
- `alire/` contains Alire state (lockfile, settings) for this working copy.